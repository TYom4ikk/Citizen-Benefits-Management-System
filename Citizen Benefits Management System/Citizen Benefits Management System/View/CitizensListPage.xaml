<Page x:Class="Citizen_Benefits_Management_System.View.CitizensListPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      mc:Ignorable="d" 
      d:DesignHeight="600" d:DesignWidth="900"
      Title="Граждане">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Заголовок -->
        <TextBlock Grid.Row="0" 
                   Text="Управление гражданами" 
                   Style="{StaticResource HeaderText}"/>

        <!-- Панель поиска и фильтров -->
        <Border Grid.Row="1" 
                Background="White" 
                Padding="15" 
                Margin="0,0,0,10"
                CornerRadius="4"
                BorderBrush="{StaticResource DividerColor}"
                BorderThickness="1">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <TextBlock Text="Поиск:" 
                              VerticalAlignment="Center" 
                              Margin="0,0,10,0"
                              FontSize="14"/>
                    <TextBox x:Name="TxtSearch" 
                            Width="300"
                            Style="{StaticResource ModernTextBox}"
                            Margin="0"
                            TextChanged="TxtSearch_TextChanged"/>
                    <Button Content="Очистить" 
                           Style="{StaticResource SecondaryButton}"
                           Click="BtnClearSearch_Click"
                           Margin="10,0,0,0"/>
                </StackPanel>

                <Button Grid.Column="1" 
                       x:Name="BtnRefresh"
                       Content="Обновить" 
                       Style="{StaticResource SecondaryButton}"
                       Click="BtnRefresh_Click"
                       Margin="10,0,0,0"/>

                <Button Grid.Column="2" 
                       x:Name="BtnAdd"
                       Content="+ Добавить гражданина" 
                       Style="{StaticResource PrimaryButton}"
                       Click="BtnAdd_Click"
                       Margin="10,0,0,0"/>
            </Grid>
        </Border>

        <!-- Таблица граждан -->
        <Border Grid.Row="2" 
                Background="White"
                CornerRadius="4"
                BorderBrush="{StaticResource DividerColor}"
                BorderThickness="1">
            <Grid>
                <DataGrid x:Name="DgCitizens" 
                         Style="{StaticResource ModernDataGrid}"
                         SelectionChanged="DgCitizens_SelectionChanged">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="ID" 
                                          Binding="{Binding CitizenID}" 
                                          Width="60"
                                          HeaderStyle="{StaticResource DataGridColumnHeaderStyle}"/>
                        <DataGridTextColumn Header="Фамилия" 
                                          Binding="{Binding LastName}" 
                                          Width="150"
                                          HeaderStyle="{StaticResource DataGridColumnHeaderStyle}"/>
                        <DataGridTextColumn Header="Имя" 
                                          Binding="{Binding FirstName}" 
                                          Width="150"
                                          HeaderStyle="{StaticResource DataGridColumnHeaderStyle}"/>
                        <DataGridTextColumn Header="Отчество" 
                                          Binding="{Binding MiddleName}" 
                                          Width="150"
                                          HeaderStyle="{StaticResource DataGridColumnHeaderStyle}"/>
                        <DataGridTextColumn Header="Дата рождения" 
                                          Binding="{Binding BirthDate, StringFormat=dd.MM.yyyy}" 
                                          Width="120"
                                          HeaderStyle="{StaticResource DataGridColumnHeaderStyle}"/>
                        <DataGridTextColumn Header="СНИЛС" 
                                          Binding="{Binding SNILS}" 
                                          Width="150"
                                          HeaderStyle="{StaticResource DataGridColumnHeaderStyle}"/>
                        <DataGridTextColumn Header="Телефон" 
                                          Binding="{Binding PhoneNumber}" 
                                          Width="150"
                                          HeaderStyle="{StaticResource DataGridColumnHeaderStyle}"/>
                        <DataGridTemplateColumn Header="Действия" 
                                              Width="280"
                                              HeaderStyle="{StaticResource DataGridColumnHeaderStyle}">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                        <Button Content="Льготы" 
                                               Style="{StaticResource PrimaryButton}"
                                               Click="BtnBenefits_Click"
                                               Tag="{Binding CitizenID}"
                                               Padding="10,5"
                                               Margin="2"/>
                                        <Button Content="Редактировать" 
                                               Style="{StaticResource SecondaryButton}"
                                               Click="BtnEdit_Click"
                                               Tag="{Binding CitizenID}"
                                               Padding="10,5"
                                               Margin="2"/>
                                        <Button Content="Удалить" 
                                               Style="{StaticResource SecondaryButton}"
                                               Click="BtnDelete_Click"
                                               Tag="{Binding CitizenID}"
                                               Padding="10,5"
                                               Margin="2"/>
                                    </StackPanel>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                    </DataGrid.Columns>
                </DataGrid>

                <!-- Сообщение когда нет данных -->
                <TextBlock x:Name="TxtNoData"
                          Text="Нет данных для отображения"
                          FontSize="16"
                          Foreground="{StaticResource TextSecondaryColor}"
                          HorizontalAlignment="Center"
                          VerticalAlignment="Center"
                          Visibility="Collapsed"/>
            </Grid>
        </Border>
    </Grid>
</Page>
